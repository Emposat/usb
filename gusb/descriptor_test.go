package gusb

import "testing"

var Desc = []byte{
	0x12, 0x01, 0x00, 0x02, 0x00, 0x00, 0x00, 0x40, 0xc5, 0x04, 0xa2, 0x11, 0x00,
	0x01, 0x01, 0x02, 0x00, 0x01, 0x09, 0x02, 0x20, 0x00, 0x01, 0x01, 0x00, 0xc0,
	0x31, 0x09, 0x04, 0x00, 0x00, 0x02, 0xff, 0xff, 0xff, 0x00, 0x07, 0x05, 0x81,
	0x02, 0x00, 0x02, 0xff, 0x07, 0x05, 0x02, 0x02, 0x00, 0x02, 0xff,
}

var R DeviceDescriptor

func BenchmarkDescriptors(b *testing.B) {
	b.ReportAllocs()
	var result DeviceDescriptor
	var err error

	for n := 0; n < b.N; n++ {
		result, err = NewDevice(Desc)
		if err != nil {
			panic(err)
		}
	}

	// fighting the compiler
	R = result
}
